<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extract values from a SpatRaster — extract • terra</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extract values from a SpatRaster — extract"><meta property="og:description" content="Extract values from a SpatRaster for a set of locations. The locations can be a SpatVector (points, lines, polygons), a matrix with (x, y) or (longitude, latitude -- in that order!) coordinates, or a vector with cell numbers.
When argument y is a SpatVector, and list=FALSE, the first column has the ID (record number) of the SpatVector used."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">terra</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.5-40</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rspatial/terra/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract values from a SpatRaster</h1>
    
    <div class="hidden name"><code>extract.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extract values from a SpatRaster for a set of locations. The locations can be a SpatVector (points, lines, polygons), a matrix with (x, y) or (longitude, latitude -- in that order!) coordinates, or a vector with cell numbers.</p>
<p>When argument <code>y</code> is a <code>SpatVector</code>, and <code>list=FALSE</code>, the first column has the ID (record number) of the <code>SpatVector</code> used.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S4 method for SpatRaster,SpatVector</span>
<span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, fun<span class="op">=</span><span class="cn">NULL</span>, method<span class="op">=</span><span class="st">"simple"</span>, list<span class="op">=</span><span class="cn">FALSE</span>, factors<span class="op">=</span><span class="cn">TRUE</span>, 
        cells<span class="op">=</span><span class="cn">FALSE</span>, xy<span class="op">=</span><span class="cn">FALSE</span>, weights<span class="op">=</span><span class="cn">FALSE</span>, exact<span class="op">=</span><span class="cn">FALSE</span>,
        touches<span class="op">=</span><span class="fu"><a href="geomtype.html">is.lines</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>, layer<span class="op">=</span><span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S4 method for SpatRaster,SpatExtent</span>
<span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, factors<span class="op">=</span><span class="cn">TRUE</span>, cells<span class="op">=</span><span class="cn">FALSE</span>, xy<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># S4 method for SpatRaster,matrix</span>
<span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S4 method for SpatRaster,numeric</span>
<span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>SpatRaster</p></dd>
<dt>y</dt>
<dd><p>SpatVector (for points, lines, polygons), or for points, 2-column matrix or data.frame (x, y) or (lon, lat), or a vector with cell numbers</p></dd>
<dt>fun</dt>
<dd><p>function to summarize the data by geometry. If <code>weights=TRUE</code> or <code>exact=TRUE</code> only <code>mean</code>, <code>sum</code>, <code>min</code> and <code>max</code> are accepted)</p></dd>
<dt>...</dt>
<dd><p>additional arguments to <code>fun</code> if <code>y</code> is a SpatVector. For example <code>na.rm=TRUE</code>. Or arguments passed to the <code>SpatRaster,SpatVector</code> method if <code>y</code> is a matrix (such as the <code>method</code> and <code>cells</code> arguments)</p></dd>
<dt>method</dt>
<dd><p>character. method for extracting values with points ("simple" or "bilinear"). With "simple" values for the cell a point falls in are returned. With "bilinear" the returned values are interpolated from the values of the four nearest raster cells</p></dd>
<dt>list</dt>
<dd><p>logical. If <code>FALSE</code> the output is simplified to a <code>matrix</code> (if <code>fun=NULL</code>)</p></dd>
<dt>factors</dt>
<dd><p>logical. If <code>TRUE</code> the categories are returned as factors instead of their numerical representation. The value returned becomes a data.frame if it otherwise would have been a matrix, even if there are no factors</p></dd>
<dt>cells</dt>
<dd><p>logical. If <code>TRUE</code> the cell numbers are also returned, unless <code>fun</code> is not <code>NULL</code>. Also see <code><a href="cells.html">cells</a></code></p></dd>
<dt>xy</dt>
<dd><p>logical. If <code>TRUE</code> the coordinates of the cells are also returned, unless <code>fun</code> is not <code>NULL</code>. Also see <code><a href="xyCellFrom.html">xyFromCell</a></code></p></dd>
<dt>weights</dt>
<dd><p>logical. If <code>TRUE</code> and <code>y</code> has polygons, the approximate fraction of each cell that is covered is returned as well, for example to compute a weighted mean</p></dd>
<dt>exact</dt>
<dd><p>logical. If <code>TRUE</code> and <code>y</code> has polygons, the exact fraction of each cell that is covered is returned as well, for example to compute a weighted mean</p></dd>
<dt>touches</dt>
<dd><p>logical. If <code>TRUE</code>, values for all cells touched by lines or polygons are extracted, not just those on the line render path, or whose center point is within the polygon. Not relevant for points; and always considered <code>TRUE</code> when <code>weights=TRUE</code> or <code>exact=TRUE</code></p></dd>
<dt>layer</dt>
<dd><p>character or numeric to select the layer to extract from for each geometry. If <code>layer</code> is a character it can be a name in <code>y</code> or a vector of layer names. If it is numeric, it must be integer values between <code>1</code> and <code>nlyr(x)</code></p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>matrix, list, or data.frame</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="values.html">values</a></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="rast.html">rast</a></span><span class="op">(</span>ncols<span class="op">=</span><span class="fl">5</span>, nrows<span class="op">=</span><span class="fl">5</span>, xmin<span class="op">=</span><span class="fl">0</span>, xmax<span class="op">=</span><span class="fl">5</span>, ymin<span class="op">=</span><span class="fl">0</span>, ymax<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="values.html">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">25</span></span>
<span class="r-in"><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0.5</span><span class="op">)</span>, <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>,<span class="fl">2.5</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="vect.html">vect</a></span><span class="op">(</span><span class="va">xy</span>, crs<span class="op">=</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">extract</span><span class="op">(</span><span class="va">r</span>, <span class="va">xy</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    13</span>
<span class="r-in"><span class="fu">extract</span><span class="op">(</span><span class="va">r</span>, <span class="va">p</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1    21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2    13</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">r</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     5</span>
<span class="r-in"><span class="va">r</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5</span>
<span class="r-in"><span class="va">r</span><span class="op">[</span>,<span class="fl">5</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    25</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">r</span><span class="op">[</span><span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">99</span><span class="op">:</span><span class="fl">101</span><span class="op">)</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    NA</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/meuse.tif"</span>, package<span class="op">=</span><span class="st">"terra"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="rast.html">rast</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fl">179000</span>, <span class="fl">330000</span><span class="op">)</span></span>
<span class="r-in"><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">xy</span><span class="op">-</span><span class="fl">100</span>, <span class="va">xy</span>, <span class="va">xy</span><span class="op">+</span><span class="fl">1000</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">extract</span><span class="op">(</span><span class="va">r</span>, <span class="va">xy</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  208</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="vect.html">vect</a></span><span class="op">(</span><span class="va">xy</span><span class="op">)</span></span>
<span class="r-in"><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="geometry.html">geom</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span class="r-in"><span class="va">g</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      geom part      x      y hole</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    1 178900 329900    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    2    1 179000 330000    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    3    1 180000 331000    0</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">extract</span><span class="op">(</span><span class="va">r</span>, <span class="va">p</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3  208</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">r</span> <span class="op">+</span> <span class="fl">10</span></span>
<span class="r-in"><span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">p</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3  218</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="xyCellFrom.html">cellFromXY</a></span><span class="op">(</span><span class="va">r</span>, <span class="va">xy</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  218</span>
<span class="r-in"><span class="va">r</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  208</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">x</span><span class="op">*</span><span class="fl">2</span>,<span class="va">x</span><span class="op">*</span><span class="fl">3</span><span class="op">)</span></span>
<span class="r-in"><span class="va">y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   test test.1 test.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  388    776   1164</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  261    522    783</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  218    436    654</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## extract with a polygon</span></span>
<span class="r-in"><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/lux.shp"</span>, package<span class="op">=</span><span class="st">"terra"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="vect.html">vect</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span>
<span class="r-in"><span class="va">v</span> <span class="op">&lt;-</span> <span class="va">v</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="op">]</span></span>
<span class="r-in"><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="rast.html">rast</a></span><span class="op">(</span><span class="va">v</span>, resolution<span class="op">=</span><span class="fl">.1</span>, names<span class="op">=</span><span class="st">"test"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="values.html">values</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="dimensions.html">ncell</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/elev.tif"</span>, package<span class="op">=</span><span class="st">"terra"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="rast.html">rast</a></span><span class="op">(</span><span class="va">rf</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">v</span>, <span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID elevation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  467.1052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  333.8629</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu">extract</span><span class="op">(</span><span class="va">z</span>, <span class="va">v</span><span class="op">)</span></span>
<span class="r-in"><span class="va">e</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  1    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  1    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  1    7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  1    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  2   13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  2   17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2   18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  2   19</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="va">e</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, <span class="va">e</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, <span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5.20 16.75 </span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ee</span> <span class="op">&lt;-</span> <span class="fu">extract</span><span class="op">(</span><span class="va">z</span>, <span class="va">v</span>, list<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/rapply.html" class="external-link">rapply</a></span><span class="op">(</span><span class="va">ee</span>, <span class="va">mean</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  5.20 16.75</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="va">z</span>, <span class="va">z</span><span class="op">*</span><span class="fl">2</span>, <span class="va">z</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="names.html">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">v</span><span class="op">)</span></span>
<span class="r-in"><span class="va">de</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">de</span><span class="op">[</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="va">de</span><span class="op">[</span>,<span class="fl">1</span>,drop<span class="op">=</span><span class="cn">FALSE</span><span class="op">]</span>, <span class="va">mean</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID     a    b        c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  5.20 10.4 1.733333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2 16.75 33.5 5.583333</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ee</span> <span class="op">&lt;-</span> <span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">v</span>, list<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rapply.html" class="external-link">rapply</a></span><span class="op">(</span><span class="va">ee</span>, <span class="va">mean</span><span class="op">)</span>, ncol<span class="op">=</span><span class="fu"><a href="dimensions.html">nlyr</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1] [,2]     [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]  5.20 10.4 1.733333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 16.75 33.5 5.583333</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert J. Hijmans.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

